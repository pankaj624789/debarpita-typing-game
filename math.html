<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Battle Arena</title>

<style>
body{
    font-family:Arial;
    text-align:center;
    background:linear-gradient(135deg,#ff9966,#ff5e62);
    color:white;
    margin:0;
    overflow-x:hidden;
}

.container{ padding:20px; }

button,input,select{
    padding:10px;
    font-size:18px;
    border-radius:8px;
    border:none;
    margin:8px;
}

button{
    cursor:pointer;
    background:#ff9800;
    color:white;
}

.home-btn{
    position:absolute;
    top:15px;
    left:15px;
}

.stats{
    margin-top:15px;
    font-size:20px;
}

#result{
    font-size:26px;
    margin-top:10px;
    height:30px;
}

#badges{
    margin-top:10px;
    font-size:22px;
}

.confetti{
    position:fixed;
    width:8px;
    height:8px;
    background:red;
    top:0;
    animation:fall 2s linear forwards;
}

@keyframes fall{
    to{
        transform:translateY(100vh) rotate(360deg);
        opacity:0;
    }
}
</style>
</head>

<body>

<button class="home-btn" onclick="goHome()">üè† Home</button>

<div class="container">
<h1>‚ö° Math Battle Arena ‚ö°</h1>

<select id="operation">
    <option value="add">Addition (+)</option>
    <option value="sub">Subtraction (-)</option>
    <option value="mul">Multiplication (√ó)</option>
    <option value="div">Division (√∑)</option>
</select>

<br>

<h2 id="question"></h2>
<input type="number" id="answer" placeholder="Your Answer">
<br>
<button onclick="checkAnswer()">Submit</button>

<div id="result"></div>

<div class="stats">
üèÜ Score: <span id="score">0</span> |
üíé Coins: <span id="coins">0</span> |
üî• Streak: <span id="streak">0</span> |
‚è≥ Time: <span id="time">60</span>
</div>

<div id="badges"></div>

<button onclick="restartGame()">üîÑ Restart</button>

</div>

<audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
let score=0;
let streak=0;
let coins=0;
let timeLeft=60;
let currentAnswer;
let timerInterval;

function generateQuestion(){
    const op=document.getElementById("operation").value;

    let a=Math.floor(Math.random()*20)+1;
    let b=Math.floor(Math.random()*20)+1;

    if(op==="add"){
        currentAnswer=a+b;
        question.innerText=`${a} + ${b} = ?`;
    }
    else if(op==="sub"){
        if(a<b){ [a,b]=[b,a]; }
        currentAnswer=a-b;
        question.innerText=`${a} - ${b} = ?`;
    }
    else if(op==="mul"){
        currentAnswer=a*b;
        question.innerText=`${a} √ó ${b} = ?`;
    }
    else{
        currentAnswer=a;
        b=Math.floor(Math.random()*10)+1;
        a=currentAnswer*b;
        question.innerText=`${a} √∑ ${b} = ?`;
    }
}

function checkAnswer(){
    let user=parseFloat(answer.value);

    if(user===currentAnswer){
        score++;
        streak++;
        coins+=2;

        document.getElementById("result").innerText="üéâ Correct!";
        document.getElementById("correctSound").play();
        launchConfetti();

        // streak bonus
        if(streak%5===0){
            coins+=10;
            document.getElementById("result").innerText="üî• Streak Bonus +10 Coins!";
        }

        unlockBadges();
    }else{
        streak=0;
        document.getElementById("result").innerText="‚ùå Wrong!";
        document.getElementById("wrongSound").play();
    }

    updateStats();
    answer.value="";
    generateQuestion();
}

function updateStats(){
    document.getElementById("score").innerText=score;
    document.getElementById("coins").innerText=coins;
    document.getElementById("streak").innerText=streak;
}

function unlockBadges(){
    let badgeArea=document.getElementById("badges");

    if(score===5){
        badgeArea.innerHTML+=" üèÖ Starter Star";
    }
    if(score===15){
        badgeArea.innerHTML+=" ü•à Math Hero";
    }
    if(score===30){
        badgeArea.innerHTML+=" ü•á Math Champion";
    }
}

function launchConfetti(){
    for(let i=0;i<30;i++){
        let conf=document.createElement("div");
        conf.className="confetti";
        conf.style.left=Math.random()*100+"vw";
        conf.style.background=`hsl(${Math.random()*360},100%,50%)`;
        conf.style.animationDuration=(Math.random()*2+1)+"s";
        document.body.appendChild(conf);

        setTimeout(()=>conf.remove(),2000);
    }
}

function timer(){
    timeLeft--;
    document.getElementById("time").innerText=timeLeft;

    if(timeLeft<=0){
        clearInterval(timerInterval);
        alert("üèÜ Game Over!\nFinal Score: "+score+"\nCoins Earned: "+coins);
    }
}

function restartGame(){
    score=0;
    streak=0;
    coins=0;
    timeLeft=60;
    document.getElementById("badges").innerHTML="";
    updateStats();
    document.getElementById("time").innerText=60;
    generateQuestion();
    clearInterval(timerInterval);
    timerInterval=setInterval(timer,1000);
}

function goHome(){
    window.location.href="index.html";
}

generateQuestion();
timerInterval=setInterval(timer,1000);
</script>

</body>
</html>