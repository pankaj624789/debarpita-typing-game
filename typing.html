<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debarpita's Typing Game</title>

<style>


*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: 'Poppins', sans-serif;
}

body{
    min-height:100vh;
    background: linear-gradient(-45deg, #1e1e2f, #2c3e50, #1a2980, #000428);
    background-size: 400% 400%;
    animation: gradientBG 12s ease infinite;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
}

@keyframes gradientBG{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

.container{
    width:95%;
    max-width:950px;
    backdrop-filter: blur(15px);
    background: rgba(255,255,255,0.08);
    border-radius:20px;
    padding:30px;
    box-shadow: 0 0 40px rgba(0,0,0,0.6);
    text-align:center;
    position:relative;
}

h1{
    font-size:28px;
    margin-bottom:15px;
    letter-spacing:1px;
    background: linear-gradient(90deg,#00f5ff,#ff00c8);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

#setup{
    margin-bottom:15px;
}

input, select{
    padding:12px;
    border-radius:8px;
    border:none;
    outline:none;
    font-size:15px;
    margin:6px;
    transition:0.3s;
    background:rgba(255,255,255,0.1);
    color:white;
    border:1px solid rgba(255,255,255,0.2);
}

input:focus, select:focus{
    border:1px solid #00f5ff;
    box-shadow:0 0 10px #00f5ff;
}

button{
    padding:12px 20px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
    background:linear-gradient(90deg,#ff8a00,#ff0080);
    color:white;
}

button:hover{
    transform:translateY(-3px);
    box-shadow:0 8px 20px rgba(255,0,128,0.5);
}

.home-btn{
    position:absolute;
    top:15px;
    left:15px;
    padding:8px 14px;
    font-size:14px;
}

.stats{
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(120px,1fr));
    gap:12px;
    margin:15px 0;
}

.stats div{
    background:rgba(255,255,255,0.1);
    padding:10px;
    border-radius:12px;
    backdrop-filter: blur(5px);
    font-weight:bold;
    border:1px solid rgba(255,255,255,0.15);
}

#gameArea{
    position:relative;
    height:50vh;
    border-radius:15px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.2);
    background:rgba(0,0,0,0.3);
}

.word{
    position:absolute;
    font-weight:bold;
    font-size:18px;
    padding:4px 8px;
    border-radius:8px;
    background:linear-gradient(45deg,#00f5ff,#ff00c8);
    color:white;
    box-shadow:0 0 10px rgba(0,255,255,0.7);
    animation: glow 1.5s infinite alternate;
}

@keyframes glow{
    from{ box-shadow:0 0 5px #00f5ff; }
    to{ box-shadow:0 0 20px #ff00c8; }
}

#inputBox{
    margin-top:15px;
    width:80%;
    max-width:400px;
}

#gameOver{
    margin-top:15px;
    font-size:22px;
    color:#ff4c4c;
    font-weight:bold;
}

#restartBtn{
    margin-top:10px;
}

@media(max-width:600px){
    .container{
        padding:20px;
    }
    h1{
        font-size:22px;
    }
}


</style>
</head>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<body>

<div class="container">

<h1>üöÄ Debarpita's Typing Challenge üöÄ</h1>
<button class="home-btn" onclick="goHome()">üè† Home</button>

<div id="setup">
    <input type="text" id="playerName" placeholder="Enter Your Name">
    <select id="level">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button onclick="startGame()">Start Game</button>
</div>

<h2 id="welcome"></h2>

<div class="stats">
    <div>‚è≥ Time: <span id="time">120</span></div>
    <div>‚≠ê Score: <span id="score">0</span></div>
    <div>‚ù§Ô∏è Lives: <span id="lives">20</span></div>
    <div>üèÜ High Score: <span id="highScore">0</span></div>
</div>

<div id="gameArea"></div>

<input type="text" id="inputBox" placeholder="Type word..." disabled>

<h2 id="gameOver" style="display:none;"></h2>
<button id="restartBtn" onclick="restartGame()" style="display:none;">Play Again</button>

</div>

<audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<script>

let words = [];

let score = 0;
let lives = 20;
let timeLeft = 60;
let speed = 1;
let activeWords = [];
let gameInterval, moveInterval, timerInterval;

const gameArea = document.getElementById("gameArea");
const inputBox = document.getElementById("inputBox");

document.getElementById("highScore").innerText =
localStorage.getItem("highScore") || 0;


// üî• LOAD RANDOM WORDS FROM INTERNET
async function loadWords(level){
    try{
        const response = await fetch(
        "https://random-word-api.herokuapp.com/word?number=300");

        let apiWords = await response.json();

        // Remove very short or very long words
        apiWords = apiWords.filter(w => w.length >= 3 && w.length <= 12);

        // üéØ Level based filtering
        if(level==="easy"){
            words = apiWords.filter(w => w.length <= 5);
        }
        else if(level==="medium"){
            words = apiWords.filter(w => w.length >= 5 && w.length <= 8);
        }
        else{
            words = apiWords.filter(w => w.length >= 8);
        }

        // Add her name sometimes ‚ù§Ô∏è
        words.push("Debarpita");

    } catch(error){
        console.log("API failed, using fallback words");
        words = ["planet","coding","rocket","future",
        "puzzle","energy","tiger","queen","magic","brain"];
    }
}


// üöÄ START GAME
async function startGame(){

    const name = document.getElementById("playerName").value;
    if(!name){ alert("Enter name first!"); return; }

    const level = document.getElementById("level").value;

    await loadWords(level); // üî• Load words first

    document.getElementById("welcome").innerText =
    "Welcome " + name + " üëë";

    document.getElementById("setup").style.display="none";
    inputBox.disabled=false;
    inputBox.focus();

    if(level==="easy"){ speed=1; timeLeft=60; }
    if(level==="medium"){ speed=1.5; timeLeft=45; }
    if(level==="hard"){ speed=2; timeLeft=30; }

    document.getElementById("time").innerText=timeLeft;

    document.getElementById("bgMusic").play();

    gameInterval = setInterval(createWord,1500);
    moveInterval = setInterval(moveWords,30);
    timerInterval = setInterval(updateTimer,1000);
}


// üìù CREATE WORD
function createWord(){
    if(lives<=0 || words.length===0) return;

    const word = document.createElement("div");
    word.classList.add("word");
    word.innerText =
    words[Math.floor(Math.random()*words.length)];

    word.style.left =
    Math.random()*(gameArea.clientWidth-100)+"px";
    word.style.top="0px";

    gameArea.appendChild(word);
    activeWords.push(word);
}


// ‚¨á MOVE WORDS
function moveWords(){
    activeWords.forEach((word,index)=>{
        let top=parseInt(word.style.top);
        word.style.top=(top+speed)+"px";

        if(top>gameArea.clientHeight-30){
            gameArea.removeChild(word);
            activeWords.splice(index,1);
            lives--;
            document.getElementById("lives").innerText=lives;
            document.getElementById("wrongSound").play();
            if(lives<=0) endGame();
        }
    });
}


// ‚å® CHECK TYPING
inputBox.addEventListener("input",function(){
    activeWords.forEach((word,index)=>{
        if(word.innerText===inputBox.value.trim()){
            gameArea.removeChild(word);
            activeWords.splice(index,1);
            score++;
            document.getElementById("score").innerText=score;
            inputBox.value="";
            document.getElementById("correctSound").play();
        }
    });
});


// ‚è≥ TIMER
function updateTimer(){
    timeLeft--;
    document.getElementById("time").innerText=timeLeft;
    if(timeLeft<=0) endGame();
}


// üõë END GAME
function endGame(){
    clearInterval(gameInterval);
    clearInterval(moveInterval);
    clearInterval(timerInterval);

    inputBox.disabled=true;
    document.getElementById("bgMusic").pause();

    let highScore =
    localStorage.getItem("highScore") || 0;

   if(score>highScore){
    localStorage.setItem("highScore",score);
    highScore=score;
    confetti();
}

    document.getElementById("highScore").innerText=highScore;

    document.getElementById("gameOver").style.display="block";
    document.getElementById("restartBtn").style.display="inline-block";
    document.getElementById("gameOver").innerText=
    "Game Over üéÆ Final Score: "+score;
}


// üîÑ RESTART
function restartGame(){
    location.reload();
}

function goHome(){
    window.location.href = "index.html";
}

</script>

</body>
</html>