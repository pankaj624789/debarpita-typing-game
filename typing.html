<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debarpita's Typing Game</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    text-align: center;
}

.container {
    padding: 15px;
}

#gameArea {
    position: relative;
    height: 55vh;
    overflow: hidden;
    border: 2px solid white;
    border-radius: 10px;
    margin: 15px 0;
}

.word {
    position: absolute;
    font-weight: bold;
}

input, select, button {
    padding: 10px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    margin: 5px;
}

button {
    cursor: pointer;
    background: #ff9800;
    color: white;
}

.stats {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    font-size: 16px;
}

@media(max-width:600px){
    .stats{
        flex-direction: column;
    }
}
</style>
</head>

<body>

<div class="container">

<h1>üöÄ Debarpita's Typing Challenge üöÄ</h1>
<button onclick="goHome()" style="position:absolute; top:15px; left:15px;">
üè† Home
</button>

<div id="setup">
    <input type="text" id="playerName" placeholder="Enter Your Name">
    <select id="level">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button onclick="startGame()">Start Game</button>
</div>

<h2 id="welcome"></h2>

<div class="stats">
    <div>‚è≥ Time: <span id="time">120</span></div>
    <div>‚≠ê Score: <span id="score">0</span></div>
    <div>‚ù§Ô∏è Lives: <span id="lives">20</span></div>
    <div>üèÜ High Score: <span id="highScore">0</span></div>
</div>

<div id="gameArea"></div>

<input type="text" id="inputBox" placeholder="Type word..." disabled>

<h2 id="gameOver" style="display:none;"></h2>
<button id="restartBtn" onclick="restartGame()" style="display:none;">Play Again</button>

</div>

<audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-4.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<script>

let words = [];

let score = 0;
let lives = 20;
let timeLeft = 60;
let speed = 1;
let activeWords = [];
let gameInterval, moveInterval, timerInterval;

const gameArea = document.getElementById("gameArea");
const inputBox = document.getElementById("inputBox");

document.getElementById("highScore").innerText =
localStorage.getItem("highScore") || 0;


// üî• LOAD RANDOM WORDS FROM INTERNET
async function loadWords(level){
    try{
        const response = await fetch(
        "https://random-word-api.herokuapp.com/word?number=300");

        let apiWords = await response.json();

        // Remove very short or very long words
        apiWords = apiWords.filter(w => w.length >= 3 && w.length <= 12);

        // üéØ Level based filtering
        if(level==="easy"){
            words = apiWords.filter(w => w.length <= 5);
        }
        else if(level==="medium"){
            words = apiWords.filter(w => w.length >= 5 && w.length <= 8);
        }
        else{
            words = apiWords.filter(w => w.length >= 8);
        }

        // Add her name sometimes ‚ù§Ô∏è
        words.push("Debarpita");

    } catch(error){
        console.log("API failed, using fallback words");
        words = ["planet","coding","rocket","future",
        "puzzle","energy","tiger","queen","magic","brain"];
    }
}


// üöÄ START GAME
async function startGame(){

    const name = document.getElementById("playerName").value;
    if(!name){ alert("Enter name first!"); return; }

    const level = document.getElementById("level").value;

    await loadWords(level); // üî• Load words first

    document.getElementById("welcome").innerText =
    "Welcome " + name + " üëë";

    document.getElementById("setup").style.display="none";
    inputBox.disabled=false;
    inputBox.focus();

    if(level==="easy"){ speed=1; timeLeft=60; }
    if(level==="medium"){ speed=1.5; timeLeft=45; }
    if(level==="hard"){ speed=2; timeLeft=30; }

    document.getElementById("time").innerText=timeLeft;

    document.getElementById("bgMusic").play();

    gameInterval = setInterval(createWord,1500);
    moveInterval = setInterval(moveWords,30);
    timerInterval = setInterval(updateTimer,1000);
}


// üìù CREATE WORD
function createWord(){
    if(lives<=0 || words.length===0) return;

    const word = document.createElement("div");
    word.classList.add("word");
    word.innerText =
    words[Math.floor(Math.random()*words.length)];

    word.style.left =
    Math.random()*(gameArea.clientWidth-100)+"px";
    word.style.top="0px";

    gameArea.appendChild(word);
    activeWords.push(word);
}


// ‚¨á MOVE WORDS
function moveWords(){
    activeWords.forEach((word,index)=>{
        let top=parseInt(word.style.top);
        word.style.top=(top+speed)+"px";

        if(top>gameArea.clientHeight-30){
            gameArea.removeChild(word);
            activeWords.splice(index,1);
            lives--;
            document.getElementById("lives").innerText=lives;
            document.getElementById("wrongSound").play();
            if(lives<=0) endGame();
        }
    });
}


// ‚å® CHECK TYPING
inputBox.addEventListener("input",function(){
    activeWords.forEach((word,index)=>{
        if(word.innerText===inputBox.value.trim()){
            gameArea.removeChild(word);
            activeWords.splice(index,1);
            score++;
            document.getElementById("score").innerText=score;
            inputBox.value="";
            document.getElementById("correctSound").play();
        }
    });
});


// ‚è≥ TIMER
function updateTimer(){
    timeLeft--;
    document.getElementById("time").innerText=timeLeft;
    if(timeLeft<=0) endGame();
}


// üõë END GAME
function endGame(){
    clearInterval(gameInterval);
    clearInterval(moveInterval);
    clearInterval(timerInterval);

    inputBox.disabled=true;
    document.getElementById("bgMusic").pause();

    let highScore =
    localStorage.getItem("highScore") || 0;

    if(score>highScore){
        localStorage.setItem("highScore",score);
        highScore=score;
    }

    document.getElementById("highScore").innerText=highScore;

    document.getElementById("gameOver").style.display="block";
    document.getElementById("restartBtn").style.display="inline-block";
    document.getElementById("gameOver").innerText=
    "Game Over üéÆ Final Score: "+score;
}


// üîÑ RESTART
function restartGame(){
    location.reload();
}

function goHome(){
    window.location.href = "index.html";
}

</script>

</body>
</html>